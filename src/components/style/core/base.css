/* =====================================================
   üèóÔ∏è  Overlay Library ¬∑ Base Layer
   - Token-driven, zero-bloat foundation
   - No theming / animation here ‚Äî lives in component & state layers
   ===================================================== */

/* ---------- Root ---------- */
:where(.overlay-library) {
  /* design-tokens fallbacks for safety */
  --_font-family: var(--overlay-font-family, system-ui, sans-serif);
  --_font-size   : var(--overlay-font-size-md, 14px);
  --_text-color  : var(--overlay-text-color, currentColor);

  font: var(--_font-size)/1.5 var(--_font-family);
  color: var(--_text-color);
}

/* ---------- Fixed container that hosts islands / stacks ---------- */
:where(.overlay-library .overlay-container) {
  position: fixed;
  inset-block-start: 0;          /* logical top */
  inset-inline-start: 50%;       /* logical left + centre */
  transform: translateX(-50%);

  z-index: var(--overlay-z-index, 9999);

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--overlay-gap-md, 12px);
  padding: var(--overlay-padding-md, 8px);

  overflow: visible;
  box-sizing: border-box;

  width: auto;
  max-inline-size: 90vw;         /* replaces max-width */
}

/* RTL support */
:where([dir='rtl'] .overlay-container) {
  direction: rtl;
}

/* ---------- Layout helpers ---------- */
:where(.overlay-library .overlay-flex) {
  display: flex;
  place-content: center;
  place-items:   center;
  gap: var(--overlay-gap-sm, 6px);
}

:where(.overlay-library .overlay-grid) {
  display: grid;
  gap: var(--overlay-gap-md, 12px);
}

/* ---------- Visibility utilities ---------- */
:where(.overlay-library .is-hidden)  { display: none }
:where(.overlay-library .is-visible) { display: block }

/* ---------- Scroll area ---------- */
:where(.overlay-library .overlay-scroll) {
  overflow: auto;
  max-block-size: 80vh;          /* logical height */
}

/* ---------- Focus ring (a11y) ---------- */
:where(.overlay-library
       button,
       input,
       select,
       textarea) {
  cursor: pointer;
}

:where(.overlay-library
       button:focus-visible,
       input:focus-visible,
       select:focus-visible,
       textarea:focus-visible) {
  outline: 2px solid var(--overlay-primary-color, #007aff);
  outline-offset: 2px;
}

/* ---------- Mobile tweaks ---------- */
@media (max-width: 768px) {
  :where(.overlay-library .overlay-container) {
    max-inline-size: 95vw;
    padding: var(--overlay-padding-sm, 4px);
  }
}
